<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>SOOP ë°©ì†¡ìš© ì •ë³´ ëŒ€ì‰¬ë³´ë“œ</title>
  <link rel="stylesheet" href="/overlay/style.css" />
  
  <!-- í…Œë§ˆ ë° ë°°ê²½ì´ë¯¸ì§€ ì¦‰ì‹œ ë¡œë“œ -->
  <script>
    (async () => {
      try {
        // 1. theme.json ë¡œë“œ ë° CSS ë³€ìˆ˜ ì ìš©
        const themeRes = await fetch("/overlay/theme.json?t=" + Date.now());
        if (themeRes.ok) {
          const theme = await themeRes.json();
          const root = document.documentElement;
          Object.entries(theme).forEach(([key, value]) => {
            if (value) root.style.setProperty(key, value);
          });
        }
      } catch (e) {
        // ì—ëŸ¬ ë¬´ì‹œ
      }

      try {
        // 2. background.json ë¡œë“œ ë° ë°°ê²½ì´ë¯¸ì§€ ì ìš©
        const bgRes = await fetch("/overlay/background.json?t=" + Date.now());
        if (bgRes.ok) {
          const bg = await bgRes.json();
          if (bg.current) {
            const imgUrl = "/api/backgrounds/image/" + encodeURIComponent(bg.current);
            document.body.style.backgroundImage = "url('" + imgUrl + "')";
            document.body.style.backgroundSize = "cover";
            document.body.style.backgroundPosition = "center";
            document.body.style.backgroundAttachment = "fixed";
          }
        }
      } catch (e) {
        // ì—ëŸ¬ ë¬´ì‹œ
      }
    })();
  </script>
</head>
<body>
  <!-- ğŸ¥ ë©€í‹°ë·°(iframe) ì˜ì—­ -->
  <div id="multiview"></div>

  <!-- ìš°ì¸¡ ìƒë‹¨ ì •ë³´ íŒ¨ë„ -->
  <div id="right-panel">

    <!-- ğŸŒ¤ ë‚ ì”¨ -->
    <div id="weather-box">

      <!-- ğŸ”´ ë°©ì†¡ ìƒíƒœ -->
      <div id="broadcast-badge" class="broadcast-badge" style="display:none;">
        <span id="broadcast-dot" class="dot"></span>
        <span id="broadcast-text">ìƒë°©ì†¡ì¤‘ Live!</span>
      </div>

      <!-- ğŸ—“ í˜„ì¬ ë‚ ì§œ/ì‹œê°„ -->
      <div id="datetime-box" class="datetime-box">
        <div id="current-date">--ë…„--ì›” --ì¼ ---ìš”ì¼</div>
        <div id="current-time">--:--</div>
      </div>


      <div class="weather-today">
        <div class="weather-title">ì˜¤ëŠ˜ ë‚ ì”¨</div>
        <div class="weather-main">
          <span id="weather-icon">â˜€ï¸</span>
          <span id="weather-temp">--Â°C</span>
        </div>
        <div id="weather-desc">--</div>
        <div class="weather-range">
          ìµœì € <span id="today-min">--</span>Â°
          Â· ìµœê³  <span id="today-max">--</span>Â°
        </div>
      </div>

      <div class="weather-tomorrow">
        <div class="weather-title">ë‚´ì¼</div>
        <div class="weather-range">
          <span id="tomorrow-icon">ğŸŒ¤ï¸</span>
          ìµœì € <span id="tomorrow-min">--</span>Â°
          Â· ìµœê³  <span id="tomorrow-max">--</span>Â°
        </div>
      </div>
    </div>

    <!-- ğŸ“ˆ ì˜¤ëŠ˜ ì£¼ìš” ì£¼ì‹ë™í–¥ -->
    <div id="stock-box">
      <div class="section-title">ğŸ“ˆ ì˜¤ëŠ˜ ì£¼ìš” ì£¼ì‹ë™í–¥</div>
      <ul>
        <li><span>ì½”ìŠ¤í”¼</span><span id="KOSPI">-</span></li>
        <li><span>ì½”ìŠ¤ë‹¥</span><span id="KOSDAQ">-</span></li>
        <li><span>ë‹¤ìš°</span><span id="DOW">-</span></li>
        <li><span>ë‚˜ìŠ¤ë‹¥</span><span id="NASDAQ">-</span></li>
      </ul>
    </div>

    <!-- ğŸ“º SOOP ì¸ê¸°ë°©ì†¡ TOP5 (ë°©ì†¡êµ­ ìŠ¤íƒ€ì¼) -->
    <div id="soop-top-box" style="display:none;">
      <div class="section-title">ğŸ“º SOOP ì¸ê¸°ë°©ì†¡ TOP5</div>
      <div id="soop-top-list" class="soop-top-list"></div>
    </div>

      <!-- ğŸ†• ì‹ ì… ìŠ¤íŠ¸ë¦¬ë¨¸ TOP10 -->
    <div id="rookie-box" style="display:none;">
      <div class="section-title">ğŸ†• ì‹ ì… ìŠ¤íŠ¸ë¦¬ë¨¸ TOP10</div>
      <div id="rookie-list" class="rookie-list"></div>
    </div>    

    <!-- ğŸ”» ìš°ì¸¡ ë°°ë„ˆ(ê³µì§€/í˜‘ì°¬/ê´‘ê³  ë¬¸êµ¬) -->
    <div id="banner-box">
      <div id="banner-text">í˜‘ì°¬ Â· ê³µì§€ Â· ì•ˆë‚´ ë¬¸êµ¬</div>
    </div>

  </div>

  <!-- (ì˜µì…˜) í•˜ë‹¨ ë°°ë„ˆë°”: í•„ìš”í•  ë•Œ banner.jsì—ì„œ ì¼œì„œ ì‚¬ìš© -->
  <div id="banner-bar">
    <span id="banner-bar-text"></span>
  </div>

  <!-- â¬‡ í•˜ë‹¨ ë‰´ìŠ¤ / ì†ë³´ ë°” -->
  <div id="lower-bar">

    <!-- ì¬ë‚œ ì†ë³´ -->
    <div id="breaking-box">
      <span class="label">ì¬ë‚œì†ë³´</span>
      <span id="breaking-text"></span>
    </div>

    <!-- ì¼ë°˜ ë‰´ìŠ¤ -->
    <div id="news-box">
      <span id="news-text"></span>
    </div>

  </div>

  <!-- ğŸ§© ë“œë˜ê·¸ ê°€ëŠ¥í•œ ì¶”ê°€ ë©”ë‰´ íŒ¨ë„ -->
  <!-- 1) ì¼ë³¸ì·¨ì—… íŒ¨ë„ -->
  <div id="panel-jobsjp" class="floating-panel">
    <div class="floating-handle">
      <span class="floating-title">ğŸ‡¯ğŸ‡µ ì¼ë³¸ ì·¨ì—…</span>
      <div class="floating-actions">
        <button data-panel="panel-jobsjp" data-action="lock" class="floating-btn" type="button">ğŸ”“</button>
        <button data-panel="panel-jobsjp" data-action="close" class="floating-btn" type="button">âœ–</button>
      </div>
    </div>
    <div class="floating-body">
      <div id="jobsjp-box" class="jobs-panel">
        <div class="jobs-head">
          <div class="jobs-source" id="jobsjp-source"></div>
          <div class="jobs-sub" id="jobsjp-meta"></div>
        </div>
        <div id="jobsjp-list" class="jobs-list"></div>
      </div>
    </div>
  </div>

  <!-- 2) ì¼ë³¸ ë‚ ì”¨ íŒ¨ë„ -->
  <div id="panel-jpwx" class="floating-panel">
    <div class="floating-handle">
      <span class="floating-title">ğŸ‡¯ğŸ‡µ ì¼ë³¸ ë‚ ì”¨</span>
      <div class="floating-actions">
        <button data-panel="panel-jpwx" data-action="lock" class="floating-btn" type="button">ğŸ”“</button>
        <button data-panel="panel-jpwx" data-action="close" class="floating-btn" type="button">âœ–</button>
      </div>
    </div>
    <div class="floating-body">
      <div id="jpwx-box" class="jobs-panel">
        <div class="jobs-head">
          <div class="jobs-source" id="jpwx-source"></div>
          <div class="jobs-sub" id="jpwx-meta"></div>
        </div>
        <div id="jpwx-list" class="jobs-list"></div>
      </div>
    </div>
  </div>

  <!-- 3) ì¸ì²œê³µí•­ í„°ë¯¸ë„ íŒ¨ë„ -->
  <div id="panel-icn" class="floating-panel">
    <div class="floating-handle">
      <span class="floating-title">âœˆï¸ ICN í„°ë¯¸ë„</span>
      <div class="floating-actions">
        <button data-panel="panel-icn" data-action="lock" class="floating-btn" type="button">ğŸ”“</button>
        <button data-panel="panel-icn" data-action="close" class="floating-btn" type="button">âœ–</button>
      </div>
    </div>
    <div class="floating-body">
      <div id="icn-box" class="jobs-panel">
        <div class="jobs-head">
          <div class="jobs-source" id="icn-source"></div>
          <div class="jobs-sub" id="icn-meta"></div>
        </div>
        <div id="icn-list" class="jobs-list"></div>
      </div>
    </div>
  </div>

  <!-- 4) í™˜ìœ¨ íŒ¨ë„ -->
  <div id="panel-fx" class="floating-panel">
    <div class="floating-handle">
      <span class="floating-title">ğŸ’± í™˜ìœ¨</span>
      <div class="floating-actions">
        <button data-panel="panel-fx" data-action="lock" class="floating-btn" type="button">ğŸ”“</button>
        <button data-panel="panel-fx" data-action="close" class="floating-btn" type="button">âœ–</button>
      </div>
    </div>
    <div class="floating-body">
      <div id="fx-box" class="jobs-panel">
        <div class="jobs-head">
          <div class="jobs-source" id="fx-source"></div>
          <div class="jobs-sub" id="fx-meta"></div>
        </div>
        <div id="fx-list" class="jobs-list"></div>
      </div>
    </div>
  </div>


  <audio id="alert-sound" src="/overlay/disaster.wav" preload="auto"></audio>

  <!-- JS ë¡œë”© ìˆœì„œ: ë©”ì¸ â†’ ê¸°ëŠ¥(ë‚ ì”¨/ì£¼ì‹/ë°°ë„ˆ) â†’ í…Œë§ˆ(ìµœì¢… ë®ì–´ì“°ê¸°) -->
  <script src="/overlay/script.js"></script>
  <script src="/overlay/weather.js"></script>
  <script src="/overlay/stocks.js"></script>
  <script src="/overlay/banner.js"></script>
  <script src="/overlay/theme.js"></script>
  <script src="/overlay/multiview.js"></script>

</body>
</html>
